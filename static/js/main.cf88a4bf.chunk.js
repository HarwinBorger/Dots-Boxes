(this["webpackJsonpdots-and-boxes"]=this["webpackJsonpdots-and-boxes"]||[]).push([[0],{14:function(e,t,r){},17:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),o=r(8),i=r.n(o),s=(r(14),r(1)),l=r(3),c=r(4),u=r(6),m=r(5),y=r(2),x=r.n(y),f=-200,p=-50,d=5,h=4,g=100,b=function(e){Object(u.a)(r,e);var t=Object(m.a)(r);function r(e){var a;return Object(l.a)(this,r),(a=t.call(this,e)).size={default:10,hover:20},a.state={radius:a.size.default},a}return Object(c.a)(r,[{key:"render",value:function(){var e=this;return n.a.createElement("circle",{onClick:this.props.onClick,onMouseEnter:function(){return e.setState({radius:e.size.hover})},onMouseLeave:function(){return e.setState({radius:e.size.default})},className:"box__dot box__dot--".concat(this.props.modifier),cx:this.props.cx,cy:this.props.cy,r:this.state.radius,stroke:"black",strokeWidth:"3",fill:this.props.currentColor})}}]),r}(n.a.Component),v=function(e){return n.a.createElement("line",{className:"box__line",x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stroke:e.color})},C=function(e){return!1===e.id?null:n.a.createElement("line",{className:"box__mouseline",x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stroke:e.currentColor,strokeWidth:"8",strokeLinecap:"round"})},k=function(e){return n.a.createElement("g",null,n.a.createElement("rect",{className:"box__tile",x:e.x,y:e.y,width:e.size,height:e.size,fill:e.fill,stroke:"#222",strokeWidth:"12"}),n.a.createElement("text",{className:"box__number",x:e.x+e.size/2,y:e.y+e.size/2,dominantBaseline:"middle",textAnchor:"middle",fill:"black"},e.number+1))},E=function(e){return n.a.createElement("g",{className:"players__player player "+(e.currentPlayer?"player--current":"")},n.a.createElement("circle",{className:"player__circle",cx:e.cx,cy:-50,fill:"#48443C",r:"50",strokeDasharray:157/e.score,stroke:e.currentPlayer?"#FEDC7C":e.fill}),n.a.createElement("text",{className:"player__score",x:e.cx,y:-45,dominantBaseline:"middle",textAnchor:"middle",fill:e.fill},e.score),n.a.createElement("text",{className:"player__name",x:e.cx,y:25,dominantBaseline:"middle",textAnchor:"middle",fill:"black"},e.name))},P=function(e){return!1===e.player?null:n.a.createElement("g",{className:"winner",transform:"translate(".concat(e.offset,",0)"),onClick:e.onClick},n.a.createElement("rect",{className:"winner__rect",x:"-400",width:"400",height:"100",fill:"black"}),n.a.createElement("text",{className:"winner__text",x:"-".concat(e.offset/2),y:"50",dominantBaseline:"middle",textAnchor:"middle"},e.player))},L=function e(){Object(l.a)(this,e)};L.calcTileNumber=function(e,t,r){return r*t+e},L.getLinePositions=function(e,t,r){return{tl:{x:e*r,y:t*r},tr:{x:(e+1)*r,y:t*r},bl:{x:e*r,y:(t+1)*r},br:{x:(e+1)*r,y:(t+1)*r}}},L.getPossibleOptions=function(e,t,r,a){var n=x.a.filter(e,(function(e){return(e.pos.x1===r&&e.pos.y1===a||e.pos.x2===r&&e.pos.y2===a)&&!1===e.player})),o=x.a.filter(t,(function(e){return x.a.filter(n,(function(t){return t.pos.x1===e.pos.x&&t.pos.y1===e.pos.y||t.pos.x2===e.pos.x&&t.pos.y2===e.pos.y})).length}));return x.a.map(o,"id")};var w=function e(){Object(l.a)(this,e),this.equal="equal"},O=function(e){Object(u.a)(r,e);var t=Object(m.a)(r);function r(){var e;return Object(l.a)(this,r),(e=t.call(this)).restartGame=function(){e.setState(e.initialState)},e.generateTileData=function(){for(var e=[],t=0;t<h;t++)for(var r=0;r<d;r++){var a=L.calcTileNumber(r,t,d);e[a]={pos:{x:r,y:t},player:!1,number:a}}return e},e.generateLineData=function(){for(var e=[],t=0,r=0;r<=h;r++)for(var a=0;a<=d;a++){var n=L.getLinePositions(a,r,g),o=L.calcTileNumber(a,r,d);if(a<d){var i=r>0&&o-d,s=r<h&&o;e[t]={id:t,pos:{x1:n.tl.x,y1:n.tl.y,x2:n.tr.x,y2:n.tr.y},tiles:[i,s],player:!1},t++}if(r<h){var l=a>0&&o-1,c=a<d&&o;e[t]={id:t,pos:{x1:n.tl.x,y1:n.tl.y,x2:n.bl.x,y2:n.bl.y},tiles:[l,c],player:!1},t++}}return e},e.generateDotData=function(){for(var e=[],t=0,r=0;r<=h;r++)for(var a=0;a<=d;a++)e[t]={id:t,pos:{x:a*g,y:r*g}},t++;return e},e.drawLine=function(t){var r=Object(s.a)({},e.state.box.dots),a=Object(s.a)({},e.state.game),n=Object(s.a)({},e.state.box.lines),o=r[t].pos.x,i=r[t].pos.y,l=a.mouseLine.x,c=a.mouseLine.y,u=L.getPossibleOptions(n,r,o,i),m=!1;t!==a.mouseLine.id&&!1!==a.mouseLine.id&&(m=x.a.filter(n,(function(e){return(e.pos.x1===o&&e.pos.y1===i||e.pos.x2===o&&e.pos.y2===i)&&(e.pos.x1===l&&e.pos.y1===c||e.pos.x2===l&&e.pos.y2===c)}))),t!==a.mouseLine.id&&!1===a.mouseLine.id||(t=!1,o=!1,i=!1,u=!1),a.mouseLine.id=t,a.mouseLine.x=o,a.mouseLine.y=i,a.mouseLine.options=u,e.setState({game:a}),1===m.length&&e.setLine(x.a.first(m).id)},e.setLine=function(t){var r=Object(s.a)({},e.state.game),a=Object(s.a)({},e.state.box.lines);if(!1===a[t].player){a[t].player=r.currentPlayer,e.setState({lines:a});var n=!1;a[t].tiles.forEach((function(t){!1!==t&&(4===x.a.filter(a,(function(e){return e.tiles.includes(t)&&!1!==e.player})).length&&(e.setBox(t,r.currentPlayer),n=!0))})),!0!==n&&e.switchPlayer()}},e.setBox=function(t,r){var a=Object(s.a)({},e.state.box.tiles);a[t].player=r,e.setState(a),e.isFinish()},e.getLineColor=function(t){var r=Object(s.a)({},e.state.box.lines)[t].player;return!1===r?"#49453D":e.state.players[r].color},e.getBoxColor=function(t){var r=Object(s.a)({},e.state.box.tiles)[t].player;return!1===r?"#6B675E":e.state.players[r].color},e.getCurrentPlayerColor=function(){return e.state.players[e.state.game.currentPlayer].color},e.handleMouseMove=function(t){var r=Object(s.a)({},e.state.game),a=e.svg.createSVGPoint();a.x=t.clientX,a.y=t.clientY,r.mouse=a.matrixTransform(e.svg.getScreenCTM().inverse()),e.setState({game:r})},e.getDotOptionClass=function(t){return e.state.game.mouseLine.options&&e.state.game.mouseLine.options.includes(t)?"active":""},e.getPlayerScore=function(t){var r=e.state.box.tiles;return x.a.filter(r,(function(e){return e.player===t})).length},e.isCurrentPlayer=function(t){return t===e.state.game.currentPlayer},e.isFinish=function(){var t=e.state.box.tiles,r=x.a.filter(t,(function(e){return!1!==e.player}));if(t.length===r.length){var a=Object(s.a)({},e.state.game);return e.getPlayerScore(0)>e.getPlayerScore(1)?a.winner=0:e.getPlayerScore(1)>e.getPlayerScore(0)?a.winner=1:a.winner=w.equal,e.setState({game:a}),!0}return!1},e.getWinner=function(t){return!1!==t&&(t===w.equal?"Draw!":e.state.players[t].name+" won the game!")},e.state=e.initialState,e}return Object(c.a)(r,[{key:"switchPlayer",value:function(){var e=Object(s.a)({},this.state.game);e.currentPlayer=1-e.currentPlayer,this.setState({game:e})}},{key:"render",value:function(){var e=this,t=this.state.box.tiles.map((function(t){var r=t.pos.x*g,a=t.pos.y*g;return n.a.createElement(k,{key:t.number,fill:e.getBoxColor(t.number),x:r,y:a,size:g,number:t.number})})),r=this.state.box.lines.map((function(t){return n.a.createElement(v,{key:t.id,x1:t.pos.x1,y1:t.pos.y1,x2:t.pos.x2,y2:t.pos.y2,color:e.getLineColor(t.id),currentColor:e.getCurrentPlayerColor()})})),a=this.state.box.dots.map((function(t){return n.a.createElement(b,{onClick:function(){return e.drawLine(t.id)},key:t.id,cx:t.pos.x,cy:t.pos.y,currentColor:e.getCurrentPlayerColor(),modifier:e.getDotOptionClass(t.id)})})),o=f,i=p,s=d*g+-2*f,l=h*g+-2*p;return n.a.createElement("div",{className:"App"},n.a.createElement("svg",{className:"box",width:"100%",height:"100vh",viewBox:"".concat(o," ").concat(i," ").concat(s," ").concat(l),onMouseMove:function(t){return e.handleMouseMove(t)},ref:function(t){return e.svg=t}},t,r,a,n.a.createElement(C,{id:this.state.game.mouseLine.id,x1:this.state.game.mouseLine.x,y1:this.state.game.mouseLine.y,x2:this.state.game.mouse.x,y2:this.state.game.mouse.y,currentColor:this.getCurrentPlayerColor()}),n.a.createElement(E,{cx:"-100",cy:0,fill:this.state.players[0].color,score:this.getPlayerScore(0),name:this.state.players[0].name,currentPlayer:this.isCurrentPlayer(0)}),n.a.createElement(E,{cx:s-300,cy:0,fill:this.state.players[1].color,score:this.getPlayerScore(1),name:this.state.players[1].name,currentPlayer:this.isCurrentPlayer(1)}),n.a.createElement("text",{onClick:this.restartGame,x:250,y:"90%",dominantBaseline:"middle",textAnchor:"middle",fill:"white"},"Restart"),n.a.createElement(P,{onClick:this.restartGame,offset:s/2,player:this.getWinner(this.state.game.winner)})))}},{key:"initialState",get:function(){return{game:{currentPlayer:0,mouseLine:{id:!1,x:0,y:0,options:!1},mouse:{x:!1,y:!1},winner:!1},players:[{name:"Albert Einstein",color:"#E0474C"},{name:"Leonardo da Vinci",color:"#72A6CA"}],box:{tiles:this.generateTileData(),lines:this.generateLineData(),dots:this.generateDotData()}}}}]),r}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,t,r){e.exports=r(17)}},[[9,1,2]]]);
//# sourceMappingURL=main.cf88a4bf.chunk.js.map